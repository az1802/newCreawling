{
	"js": "\/* global request *\/\r\n\r\nexports.__props = ['editAddShow', 'order', 'waimai', 'modeType', 'wmType', 'isHm'];\r\nexports.__data = {\r\n\tmap: {\r\n\t\tshow: false,\r\n\t\taddress: ''\r\n\t},\r\n\tshowAddrPicker: false,\r\n\tpeisongAddr: {\r\n\t\tname: '',\r\n\t\tlastId: ''\r\n\t},\r\n\tpeisongAddrList: []\r\n}\r\n\/\/\u83b7\u53d6\u5730\u5740\u9009\u62e9\u6570\u636e\r\nexports.getAddrPickerData = function (wmType) {\r\n\tthis.peisongAddrList = this.modeType.positionList && this.modeType.positionList[wmType] || [];\r\n}\r\n\r\nexports.closeWindow = function () {\r\n\tthis.waimai.show = false;\r\n\tthis.$emit('waimaiP', this.waimai)\r\n}\r\nexports.saveAddr = function (addr) {\r\n\tvar self = this\r\n\tvar addrDetail = this.waimai.editAddr\r\n\tif (this.isHm) {\r\n\t\taddrDetail.addr1 = this.peisongAddr.name;\r\n\t\taddrDetail.address = this.peisongAddr.name;\r\n\t\taddrDetail.hmId = this.peisongAddr.lastId;\r\n\t\taddrDetail.lng = '116.0';\r\n\t\taddrDetail.lat = '40.0';\r\n\t}\r\n\r\n\tif (!(\/^[5,6,8,9]([0-9]{7})$\/.test(addr.phone) || (\/1[0-9]{10}$\/.test(addr.phone)))) {\r\n\t\ttipMessage('\u8bf7\u586b\u5199\u6b63\u786e\u7684\u624b\u673a\u53f7\u7801');\r\n\t} else if (!addr.name || !addr.address || !addr.addr2) {\r\n\t\ttipMessage('\u8bf7\u5c06\u9001\u8d27\u5730\u5740\u586b\u5199\u5b8c\u6574');\r\n\t} else {\r\n\t\t\/\/ var cmd = this.modeType.myAddress.postCmd;\r\n\t\tconsole.log(addrDetail, 'addrDetail  37')\r\n\t\tvar par = {\r\n\t\t\tp: httpUrlArgs().p,\r\n\t\t\tmsid: addrDetail.msid,\r\n\t\t\taddrid: addrDetail.addrid,\r\n\t\t\tname: addrDetail.name,\r\n\t\t\tphone: addrDetail.phone,\r\n\t\t\taddr1: addrDetail.addr1,\r\n\t\t\taddr2: addrDetail.addr2,\r\n\t\t\taddress: addrDetail.address,\r\n\t\t\tlng: addrDetail.lng,\r\n\t\t\tlat: addrDetail.lat,\r\n\t\t\thmId: addrDetail.hmId,\r\n\t\t\tsortIdStr: this.waimai.index,\r\n\t\t}\r\n\t\trequest.rpc(\"\\\\order\\\\orderApi\\\\ServiceApiOrders\\\\saveDistributionAddress\", par, function (d) {\r\n\t\t\tif (d.status === 1) {\r\n\t\t\t\tself.modeType.myAddress.list = d.data.ret.list;\r\n\t\t\t\tself.$emit('addressListR', self.modeType.myAddress.list);\r\n\t\t\t\tforeach(d.data, function (o) {\r\n\t\t\t\t\tif (o.name === self.waimai.editAddr.name && o.phone === self.waimai.editAddr.phone && o.addr1 === self.waimai.editAddr.addr1 && o.addr2 === self.waimai.editAddr.addr2) {\r\n\t\t\t\t\t\tself.order.post.newAddr = o;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tself.waimai.editAddr = {};\r\n\t\t\t\tself.waimai.show = false;\r\n\t\t\t} else {\r\n\t\t\t\tif (self.isHm) {\r\n\t\t\t\t\td.info = d.info.replace('\u5b9a\u4f4d\u9009\u62e9\u5730\u5740', '\u914d\u9001\u533a\u57df');\r\n\t\t\t\t\td.info = d.info.replace('\u95e8\u724c\u53f7\u7801', '\u8be6\u7ec6\u5730\u5740');\r\n\t\t\t\t}\r\n\t\t\t\ttipMessage(d.info);\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t\t\/\/ request.cmd(\"myaddr-save\", get, self.waimai.editAddr, function (d) {\r\n\t\t\/\/ \t\/\/ var d = result.data;\r\n\t\t\/\/ \t    if (d.status === 1) {\r\n\t\t\/\/ \t\t\tself.modeType.myAddress.list = d.data.list;\r\n\t\t\/\/ \t\t\tself.$emit('addressListR', self.modeType.myAddress.list);\r\n\t\t\/\/ \t\t\tconsole.log(d,'dddddd')\r\n\t\t\/\/ \t        foreach(d.data, function (o) {\r\n\t\t\/\/ \t            if (o.name === self.waimai.editAddr.name && o.phone === self.waimai.editAddr.phone && o.addr1 ===self.waimai.editAddr.addr1 && o.addr2 === self.waimai.editAddr.addr2) {\r\n\t\t\/\/ \t                self.order.post.newAddr = o;\r\n\t\t\/\/ \t            }\r\n\t\t\/\/ \t        });\r\n\t\t\/\/ \t\t\tself.waimai.editAddr = {};\r\n\t\t\/\/ \t\t\tself.waimai.show = false;\r\n\t\t\/\/ \t    } else {\r\n\t\t\/\/ \t        tipMessage('\u4fdd\u5b58\u5931\u8d25');\r\n\t\t\/\/ \t    }\r\n\t\t\/\/ });\r\n\t}\r\n};\r\nexports.__created = function () {\r\n\t\/\/ this.addressShow=false;\r\n\t\/\/ this.$emit('addressShowAction',this.addressShow)\r\n\tconsole.log('==37==');\r\n\r\n}\r\nexports.__watch = {\r\n\t'waimai.show': function (n) {\r\n\t\tif (n && this.isHm) {\r\n\t\t\t\/\/ \u521d\u59cb\u5316\u914d\u9001\u5730\u5740\u9009\u62e9\u6570\u636e\r\n\t\t\tthis.getAddrPickerData(this.wmType);\r\n\t\t\tthis.peisongAddr = {\r\n\t\t\t\tname: '',\r\n\t\t\t\tlastId: ''\r\n\t\t\t};\r\n\t\t\tif (this.waimai.editAddr.hmId && this.isValidHmId(this.waimai.editAddr.hmId)) {\r\n\t\t\t\tthis.peisongAddr.name = this.waimai.editAddr.address;\r\n\t\t\t\tthis.peisongAddr.lastId = this.waimai.editAddr.hmId\r\n\t\t\t} else if (this.modeType.defaultAddr.hmId && this.isValidHmId(this.modeType.defaultAddr.hmId)) {\r\n\t\t\t\tthis.peisongAddr.name = this.modeType.defaultAddr.hmDesc;\r\n\t\t\t\tthis.peisongAddr.lastId = this.modeType.defaultAddr.hmId;\r\n\t\t\t}\r\n\t\t\tthis.waimai.editAddr.addr2 = this.waimai.editAddr.addr2 || this.modeType.defaultAddr.qrName\r\n\t\t}\r\n\t}\r\n}\r\nexports.showMap = function () {\r\n\tthis.map.show = true;\r\n};\r\nexports.mapRAction = function (data) {\r\n\tconsole.log(data, 'ddd')\r\n\tthis.waimai.editAddr.addr1 = data.address\r\n}\r\nexports.isValidHmId = function (hmid) {\r\n\tvar valid = false;\r\n\r\n\tfunction findHm(list) {\r\n\t\tif (valid) return;\r\n\t\tforeach(list, function (addr) {\r\n\t\t\tif (addr.id == hmid) {\r\n\t\t\t\tvalid = true;\r\n\t\t\t\treturn valid;\r\n\t\t\t} else if (addr.child && addr.child.length) {\r\n\t\t\t\tfindHm(addr.child)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\tfindHm(this.peisongAddrList);\r\n\treturn valid;\r\n}\n",
	"css": ".com-000037 .titleHead{padding:0.8rem 0.5rem;}\r\n\r\n.com-000037 .add{bottom: 0px;left:0;right:0;top:0px; width:100%;height: 100%;background:#F8F8F8;z-index: 30;}\r\n.com-000037 .add .row{height: 3.2rem;border-bottom: solid 1px #eee;color: #000;background:#fff;padding: 0 0.5rem}\r\n.com-000037 .add .row:last-child{border:none;}\r\n.com-000037 .add .row .title{width: 6rem;text-align: left;color: #ccc;}\r\n.com-000037 .add .row .input{text-align: left;color: #000;}\r\n.com-000037 .add .row .input .placeholder {\r\n    color: #777;\r\n    font-size: 17px;\r\n}\r\n.com-000037 .input .detail{\r\n    color: #000;\r\n    width: 100%;\r\n    white-space: normal;\r\n}\r\n.com-000037 .add .row .input input{color: #000;border: none;width: 100%;}\r\n.com-000037 .add .row.w2>div{padding:1.3rem;}\r\n\/* .com-000037 .add .row.w2 button{background:#fff;border:solid 1px #FF591F;border-radius: 3px;height:40px;color:#FF591F;} *\/\r\n\/* .com-000037 .add .row.w2 button.ok{background:#FF591F;color:#fff;} *\/\r\n.com-000037 .add .bottom{position: fixed;height: 4rem;line-height: 4rem;width: 100%;bottom: 0;font-size: 1.2rem}\r\n.com-000037 .add .bottom .cancel{width: 8rem;background: #dfdfdf}\r\n.com-000037 .add .bottom .submit{background: #f08200;color: white;} \r\n\n",
	"html": "<div class=\"add pf\" v-if='waimai.show'>\r\n    <div class=\"titleHead\">{{waimai.editAddr.addrid ? '\u4fee\u6539' : '\u6dfb\u52a0'}}\u5730\u5740<\/div>\r\n    <div class=\"row table-cell tl\">\r\n        <div class=\"title\">\u59d3\u540d<\/div>\r\n        <div class=\"input\">\r\n            <input v-model=\"waimai.editAddr.name\" placeholder=\"\u8054\u7cfb\u4eba\u59d3\u540d\">\r\n        <\/div>\r\n    <\/div>\r\n    <div class=\"row table-cell tl\">\r\n        <div class=\"title\">\u624b\u673a\u53f7\u7801<\/div>\r\n        <div class=\"input\">\r\n            <input v-model=\"waimai.editAddr.phone\" placeholder=\"\u8054\u7cfb\u4eba\u624b\u673a\u53f7\u7801\">\r\n        <\/div>\r\n    <\/div>\r\n    <!-- \u914d\u9001\u70b9 -->\r\n    <div class=\"row table-cell tl\" v-if=\"isHm\">\r\n        <div class=\"title\">\u914d\u9001\u533a\u57df<\/div>\r\n        <div class=\"input\" @click=\"showAddrPicker = true\">\r\n            <div class=\"placeholder\" v-show=\"!peisongAddr.name\">\u8bf7\u9009\u62e9\u914d\u9001\u5730\u5740<\/div>\r\n            <div class=\"detail\" v-show=\"peisongAddr.name\">{{peisongAddr.name}}<\/div>\r\n        <\/div>\r\n    <\/div>\r\n    <!-- \u5916\u5356\u5730\u5740 -->\r\n    <div class=\"row table-cell tl\" v-else>\r\n        <div class=\"title\">\u5730\u5740\u5b9a\u4f4d<\/div>\r\n        <div class=\"input\" @click=\"showMap();\">{{waimai.editAddr.address|| '\u8bf7\u5b9a\u4f4d\u9009\u62e9\u4f4d\u7f6e'}}<\/div>\r\n    <\/div>\r\n    <div class=\"row table-cell tl\">\r\n        <div class=\"title\">{{isHm ? '\u8be6\u7ec6\u5730\u5740' : '\u95e8\u724c\u53f7\u7801'}}<\/div>\r\n        <div class=\"input\">\r\n            <input v-model=\"waimai.editAddr.addr2\" :placeholder=\"isHm ? '\u8bf7\u8f93\u5165\u8be6\u7ec6\u5730\u5740' : '\u8bf7\u8f93\u5165\u95e8\u724c\u53f7'\">\r\n        <\/div>\r\n    <\/div>\r\n    <div class=\"bottom\">\r\n        <div class=\"table-cell\">\r\n            <div class=\"cancel\" @click=\"closeWindow\">\u8fd4\u56de<\/div>\r\n            <div class=\"submit\" @click='saveAddr(waimai.editAddr)'>\u4fdd\u5b58\u5730\u5740<\/div>\r\n        <\/div>\r\n    <\/div>\r\n<\/div>\r\n<!-- \u5730\u5740\u9009\u62e9\u5668 -->\r\n<com-990024 :allAddrs=\"peisongAddrList\" :show.sync=\"showAddrPicker\" :pickedAddr.sync=\"peisongAddr\" :showBtn=\"true\">\r\n<\/com-990024>\r\n<com-000038 v-bind:map=\"map\" :waimai=\"waimai\" v-if=\"map.show\"><\/com-000038>\n",
	"component_id": "000037",
	"version": "201117142902",
	"data": {
		"status": 1,
		"info": ""
	},
	"extends": [],
	"type": "component"
}